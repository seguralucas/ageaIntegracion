package exit.services.json;

import java.io.IOException;
import java.util.HashMap;

import exit.services.excepciones.ExceptionFormatoFecha;

import exit.services.excepciones.ExceptionLongitud;

import exit.services.fileHandler.CSVHandler;

public interface IJsonRestEstructura {
	public void agregarCampo(String cabecera, String valor);
	public boolean validarCampos();
	public HashMap<String, String> getMapeoCabeceraValor();
	default Boolean insertarTrueOFalse(String valor){
		if(valor == null)
			return null;
		if (valor.equalsIgnoreCase("si") || valor.equalsIgnoreCase("true") || valor.equalsIgnoreCase("verdadero"))
			return true;
		else if(valor.equalsIgnoreCase("no") || valor.equalsIgnoreCase("false") || valor.equalsIgnoreCase("false"))
			return false;
		else 
			return null;
	}
	
	public abstract void mostrar();
	public abstract JSONHandler createJson() throws Exception;
	default String insertarFecha(String valor) throws ExceptionFormatoFecha{
		final String PATH_ERROR="error_formato_fecha.csv";
		if(valor==null || valor.length()==0)
			return null;
		CSVHandler csv= new CSVHandler();
		String[] fecha=valor.split("/");
		if(fecha.length==3){
			try{
				return fecha[2]+"-"+fecha[1]+"-"+fecha[0];
			}
			catch(Exception e){
				try {
					csv.escribirCSV(PATH_ERROR, this.getLine());
				} catch (IOException e1) {
					e1.printStackTrace();
				}
				throw new ExceptionFormatoFecha("Error generico de fecha");
			}
		}
		fecha=valor.split("-");
		if(fecha.length!=3){
			try {
				csv.escribirCSV(PATH_ERROR, this.getLine());
			} catch (IOException e1) {
				e1.printStackTrace();
			}
			throw new ExceptionFormatoFecha("El formato de la fecha es invalido. Deben ser tres digitos separados por guiones medios o barras");
		}
		else
			return valor;

	}
	default String insertarString(String valor){
		
		if(valor == null || valor.length()==0)
			return null;
		return valor;
	}
	
	
	public String getLine();
	public void setLine(String line);
}
